import './polyfills.server.mjs';
import{a as j,b as q,c as J,d as K}from"./chunk-SZUKZVEP.mjs";import{a as O}from"./chunk-ZRFPBMRO.mjs";import{a as Y}from"./chunk-VK77JMOH.mjs";import{a as U}from"./chunk-M455AOM7.mjs";import{a as G}from"./chunk-JNBNDGCU.mjs";import"./chunk-GTSSCL6B.mjs";import{a as D,c as R,e as $,j as H}from"./chunk-YT36GN5F.mjs";import"./chunk-CBYSDMSX.mjs";import{m as N}from"./chunk-SAMTZIPV.mjs";import"./chunk-6M3AHHX6.mjs";import{Ab as d,Ib as m,Jb as x,Kb as k,Ma as F,Mb as E,Nb as I,Ob as M,Qa as c,Qb as W,Rb as V,Sb as z,Ub as B,Xb as b,Y as p,Zb as w,aa as T,gb as S,ib as h,ka as g,la as _,mb as v,nb as A,ob as P,pb as y,qb as o,rb as s,sb as f,vb as C,zb as u}from"./chunk-UAZOSIRX.mjs";import"./chunk-VVCT4QZE.mjs";var Q=(i,n)=>n.id,X=(i,n,r)=>({id:"productPaginate",itemsPerPage:i,currentPage:n,totalItems:r}),Z=i=>["/details",i],ee=()=>[0,1,2,3,4,5];function te(i,n){if(i&1){let r=C();o(0,"i",19),u("click",function(){g(r);let e=d().$implicit,a=d();return _(a.removeFromWishList(e.id))}),s()}}function ie(i,n){if(i&1){let r=C();o(0,"i",20),u("click",function(){g(r);let e=d().$implicit,a=d();return _(a.wishAdd(e.id))}),s()}}function re(i,n){i&1&&f(0,"i",15)}function ne(i,n){i&1&&f(0,"i",16)}function ae(i,n){if(i&1){let r=C();o(0,"div",4)(1,"div",7)(2,"span",8),S(3,te,1,0,"i",9)(4,ie,1,0),s(),o(5,"div",10),f(6,"img",11),o(7,"h3",12),m(8),s(),o(9,"h4",13),m(10),s(),o(11,"div",14)(12,"span"),m(13),s(),o(14,"div"),P(15,re,1,0,"i",15,A),S(17,ne,1,0,"i",16),o(18,"span",17),m(19),s()()()(),o(20,"button",18),u("click",function(){let e=g(r).$implicit,a=d();return _(a.addToCart(e.id))}),m(21,"Add to Cart"),s()()()}if(i&2){let r=n.$implicit,t=d();c(3),v(3,t.idArrarys.includes(r.id)?3:4),c(2),h("routerLink",z(9,Z,r.id)),c(),h("src",r.imageCover,F)("alt",r.title),c(2),x(r.category.name),c(2),x(r.title.split(" ",2).join(" ")),c(3),k(" ",r.price," EGP"),c(2),y(V(11,ee).slice(0,r.ratingsAverage)),c(2),v(17,r.ratingsAverage%1!==0?17:-1),c(2),x(r.ratingsAverage)}}var xe=(()=>{let n=class n{constructor(){this._ToastrService=p(U),this._CartService=p(G),this._WishListService=p(Y),this.idArrarys=null,this.pageSize=0,this.currentPage=1,this.total=0,this._ProductsService=p(O),this.productList=[],this.textSearch=""}ngOnInit(){this.productSubscribe=this._ProductsService.getAllProduct().subscribe({next:t=>{this.productList=t.data,this.idArrarys=t.data,this.pageSize=t.metadata.limit,this.currentPage=t.metadata.currentPage,this.total=t.results,localStorage.getItem("heart")!==null&&(this.idArrarys=localStorage.getItem("heart"))},error:t=>{console.log(t)}})}pageChanged(t){this._ProductsService.getAllProduct(t).subscribe({next:e=>{this.productList=e.data,this.pageSize=e.metadata.limit,this.currentPage=e.metadata.currentPage,this.total=e.results},error:e=>{console.log(e)}})}addToCart(t){this._CartService.addProductToCart(t).subscribe({next:e=>{this._ToastrService.success(e.message,"FreshCart"),this._CartService.cartNumber.set(e.numOfCartItems)},error:e=>{console.log(e)}})}wishAdd(t){this._WishListService.addToWishList(t).subscribe({next:e=>{this._ToastrService.success(e.message),this.idArrarys=e.data,localStorage.setItem("heart",this.idArrarys.toString())},error:e=>{console.log(e)}})}removeFromWishList(t){this._WishListService.removeProductFromWishList(t).subscribe({next:e=>{this.idArrarys=e.data,localStorage.setItem("heart",this.idArrarys.toString()),this._ToastrService.warning(e.message)},error:e=>{console.log(e)}})}ngOnDestroy(){this.productSubscribe.unsubscribe()}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=T({type:n,selectors:[["app-product"]],standalone:!0,features:[W],decls:11,vars:15,consts:[[1,"my-5"],[1,"text-main","text-center","my-3"],["type","search","placeholder","search by name",1,"form-control","input","mx-auto","my-4",3,"ngModelChange","ngModel"],[1,"row","g-3"],[1,"col-md-4","col-lg-2"],[1,"d-flex","justify-content-center","align-items-center","mt-4"],["id","productPaginate","previousLabel","Previous","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",3,"pageChange","pageBoundsCorrection","maxSize","directionLinks","autoHide","responsive"],[1,"card","product","p-2"],[1,"mb-3"],[1,"fa-solid","fa-heart","text-danger","fa-xl","my-3"],[3,"routerLink"],[1,"w-100",3,"src","alt"],[1,"small","text-main","mt-1"],[1,"h6"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fas","fa-star","rating-color"],[1,"fa-regular","fa-star-half-stroke","rating-color"],[1,"text-muted"],[1,"btn-main","w-100","mt-2",3,"click"],[1,"fa-solid","fa-heart","text-danger","fa-xl","my-3",3,"click"],[1,"fa-regular","fa-heart","fa-xl","text-main","my-3",3,"click"]],template:function(e,a){e&1&&(o(0,"section",0)(1,"h2",1),m(2,"All Products "),s(),o(3,"input",2),M("ngModelChange",function(l){return I(a.textSearch,l)||(a.textSearch=l),l}),s(),o(4,"div",3),P(5,ae,22,12,"div",4,Q),b(7,"paginate"),b(8,"search"),s(),o(9,"div",5)(10,"pagination-controls",6),u("pageChange",function(l){return a.pageChanged(l)})("pageBoundsCorrection",function(l){return a.pageChanged(l)}),s()()()),e&2&&(c(3),E("ngModel",a.textSearch),c(2),y(w(8,8,w(7,5,a.productList,B(11,X,a.pageSize,a.currentPage,a.total)),a.textSearch)),c(5),h("maxSize",9)("directionLinks",!0)("autoHide",!0)("responsive",!0))},dependencies:[N,j,H,D,R,$,K,q,J],styles:[".input[_ngcontent-%COMP%]{width:50%}@media (max-width: 992px){.input[_ngcontent-%COMP%]{width:90%}}"]});let i=n;return i})();export{xe as ProductComponent};
