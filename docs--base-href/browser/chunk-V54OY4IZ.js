import{l as Y}from"./chunk-WFP56POE.js";import{a as O}from"./chunk-I5MYN75V.js";import{i as F}from"./chunk-UP7XQW4A.js";import{a as D}from"./chunk-MLJNFS6B.js";import{n as V}from"./chunk-53U67BYA.js";import{$ as S,Fb as m,Gb as b,Hb as w,Ja as I,Na as s,Nb as k,Pb as E,Ub as P,Wb as B,Y as f,db as x,fb as h,ja as u,jb as v,ka as p,lb as y,mb as T,nb as c,ob as o,pb as d,sb as g,wb as _,xb as l}from"./chunk-C44XZLMI.js";import{e as M}from"./chunk-CWTPBX7D.js";var C=M(D());var $=(e,a)=>a._id,j=e=>["/orders",e];function L(e,a){if(e&1){let r=g();c(0,"div",5)(1,"button",6),_("click",function(){u(r);let t=l();return p(t.clearItems())}),m(2,"Clear Cart "),o()(),c(3,"p",7),m(4),P(5,"currency"),o()}if(e&2){let r=l();s(4),w("Total Cart Price: ",B(5,1,r.cartItem.totalCartPrice,"GBP"),"")}}function N(e,a){if(e&1){let r=g();c(0,"div",2)(1,"div",8)(2,"div"),d(3,"img",9),o()(),c(4,"div",10)(5,"div")(6,"h3",11),m(7),o(),c(8,"p",7),m(9),o(),c(10,"button",12),_("click",function(){let t=u(r).$implicit,i=l();return p(i.delete(t.product._id))}),d(11,"i",13),m(12,"Remove"),o()(),c(13,"div",14)(14,"span",15),_("click",function(){let t=u(r).$implicit,i=l();return p(i.updateCount(t.product._id,t.count+1))}),d(15,"i",16),o(),c(16,"span",17),m(17),o(),c(18,"span",15),_("click",function(){let t=u(r).$implicit,i=l();return p(i.updateCount(t.product._id,t.count-1))}),d(19,"i",18),o()()()()}if(e&2){let r=a.$implicit;s(3),h("src",r.product.imageCover,I)("alt",r.product.title),s(4),b(r.product.title),s(2),w("Price:",r.price,""),s(8),b(r.count)}}function R(e,a){e&1&&d(0,"img",3)}function q(e,a){if(e&1&&(c(0,"button",4),m(1,"Order Now"),o()),e&2){let r=l();h("routerLink",E(1,j,r.cartItem._id))}}var J=(()=>{let a=class a{constructor(){this.cartItem={},this._CartService=f(O),this._ToastrService=f(Y)}ngOnInit(){this._CartService.getProductsCart().subscribe({next:n=>{this.num=n.data.products.length,this.numItems=n.data.products.length,this.cartItem=n.data},error:n=>{}})}delete(n){C.default.fire({title:"Are you sure?",text:"You Want to Delete This Product",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&C.default.fire({title:"Deleted!",text:"Your Product has been deleted.",icon:"success"}).then(()=>{this._CartService.deleteSpecificCartItem(n).subscribe({next:i=>{this.cartItem=i.data,this._CartService.cartNumber.set(i.numOfCartItems),this._ToastrService.error("Product Is Removed"),this.numItems=i.numOfCartItems},error:i=>{}})})})}updateCount(n,t){t>0&&this._CartService.updateProductQuantity(n,t).subscribe({next:i=>{this.cartItem=i.data},error:i=>{}})}clearItems(){C.default.fire({title:"Are you sure?",text:"You Want To Clear Your Cart",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes,  Clear it!"}).then(n=>{n.isConfirmed&&C.default.fire({title:"Deleted!",text:"Your Cart is Clear .",icon:"success"}).then(()=>{this._CartService.clearCart().subscribe({next:t=>{t.message=="success"&&(this.cartItem={},this._CartService.cartNumber.set(0),this.numItems=0)},error:t=>{}})})})}};a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=S({type:a,selectors:[["app-cart"]],standalone:!0,features:[k],decls:9,vars:3,consts:[[1,"bg-main-light","rounded-4","shadow","p-4","my-4","cart-sec","mx-auto"],[1,"h2","text-main"],[1,"row","mb-1","border-bottom"],["src","./assets/images/empty-cart.png","alt","",1,"empty"],[1,"btn-main","mt-3",3,"routerLink"],[1,"d-flex","align-items-center","justify-content-between"],[1,"btn","ms-auto","btn-sm","btn-outline-danger",3,"click"],[1,"text-main"],[1,"col-md-1"],[1,"w-100",3,"src","alt"],[1,"col-md-11","d-flex","justify-content-between","align-items-center"],[1,"h5"],[1,"mb-3","border-0",3,"click"],[1,"fa-solid","fa-trash","text-danger","cr"],[1,"d-flex","align-items-center","gap-3"],[1,"text-main","cr",3,"click"],[1,"fa-regular","fa-square-plus","fa-2xl"],[1,""],[1,"fa-regular","fa-square-minus","fa-2xl"]],template:function(t,i){t&1&&(c(0,"section",0)(1,"h1",1),m(2,"Shop Cart :"),o(),x(3,L,6,4),c(4,"div"),y(5,N,20,5,"div",2,$,!1,R,1,0,"img",3),o(),x(8,q,2,3,"button",4),o()),t&2&&(s(3),v(3,i.numItems!==0?3:-1),s(2),T(i.cartItem.products),s(3),v(8,i.numItems!==0?8:-1))},dependencies:[V,F],styles:[".empty[_ngcontent-%COMP%]{width:25%}.cart-sec[_ngcontent-%COMP%]{width:75%}@media (max-width: 992px){.empty[_ngcontent-%COMP%]{width:100%}.cart-sec[_ngcontent-%COMP%]{width:90%}}"]});let e=a;return e})();export{J as CartComponent};
