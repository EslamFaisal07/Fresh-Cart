import{b as B}from"./chunk-UGGDSA3O.js";import{a as N,b as _,c as A,d as R,f as k,g as q,h as D,i as G,k as V}from"./chunk-GPVGBQT2.js";import{h as T,i as x}from"./chunk-UP7XQW4A.js";import{h as L}from"./chunk-53U67BYA.js";import{$ as S,Fb as u,Gb as y,Na as s,Nb as b,Qb as E,Y as h,db as d,fb as F,jb as g,nb as o,ob as i,pb as C,wb as w,xb as v}from"./chunk-C44XZLMI.js";import"./chunk-CWTPBX7D.js";var M=(e,n)=>({"is-valid":e,"is-invalid":n});function j(e,n){e&1&&(o(0,"p",13),u(1,"Email is Required ."),i())}function I(e,n){e&1&&(o(0,"p",13),u(1,"Enter Valid Email ."),i())}function P(e,n){if(e&1&&(o(0,"div",6),d(1,j,2,0,"p",13)(2,I,2,0),i()),e&2){let m,l=v();s(),g(1,(m=l.loginForm.get("email"))!=null&&m.getError("required")?1:(m=l.loginForm.get("email"))!=null&&m.getError("email")?2:-1)}}function O(e,n){e&1&&(o(0,"p",13),u(1,"password is Required ."),i())}function U(e,n){e&1&&(o(0,"p",13),u(1,"password must start with upperCase then from 6 to more any chars ."),i())}function $(e,n){if(e&1&&(o(0,"div",6),d(1,O,2,0,"p",13)(2,U,2,0),i()),e&2){let m,l=v();s(),g(1,(m=l.loginForm.get("password"))!=null&&m.getError("required")?1:(m=l.loginForm.get("password"))!=null&&m.getError("pattern")?2:-1)}}function z(e,n){e&1&&(o(0,"span"),C(1,"i",14),i())}function H(e,n){if(e&1&&(o(0,"p",12),u(1),i()),e&2){let m=v();s(),y(m.msgError)}}var te=(()=>{let n=class n{constructor(){this._AuthService=h(B),this._FormBuilder=h(G),this._Router=h(T),this.msgError="",this.isLoading=!1,this.loginForm=this._FormBuilder.group({email:[null,[_.required,_.email]],password:[null,[_.required,_.pattern(/^\w{6,}$/)]]})}loginSubmit(){this.loginForm.valid?(this.isLoading=!0,this.loginSubscribe=this._AuthService.setloginForm(this.loginForm.value).subscribe({next:l=>{l.message=="success"&&(localStorage.setItem("userToken",l.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])),this.isLoading=!1},error:l=>{this.msgError=l.error.message,console.log(l),this.isLoading=!1}})):(this.loginForm.setErrors({mismatch:!0}),this.loginForm.markAllAsTouched())}ngOnDestroy(){this.loginSubscribe?.unsubscribe()}};n.\u0275fac=function(f){return new(f||n)},n.\u0275cmp=S({type:n,selectors:[["app-login"]],standalone:!0,features:[b],decls:21,vars:13,consts:[[1,"bg-main-light","shadow","p-4","my-2","rounded-4"],[1,"h2","text-main"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["id","email","type","email","formControlName","email",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","w-100"],["for","password"],["id","password","type","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"d-flex","align-items-center","justify-content-end","gap-4"],["routerLink","/forget",1,"link-primary"],["type","submit",1,"btn-main","mt-2"],[1,"alert","alert-danger","my-3"],[1,"m-0"],[1,"fas","fa-spin","fa-spinner"]],template:function(f,t){if(f&1&&(o(0,"section",0)(1,"h1",1),u(2,"login Now :"),i(),o(3,"form",2),w("ngSubmit",function(){return t.loginSubmit()}),o(4,"div",3)(5,"label",4),u(6,"Email :"),i(),C(7,"input",5),d(8,P,3,1,"div",6),i(),o(9,"div",3)(10,"label",7),u(11,"Password :"),i(),C(12,"input",8),d(13,$,3,1,"div",6),i(),o(14,"div",9)(15,"a",10),u(16," Forget Password"),i(),o(17,"button",11),u(18,` login
`),d(19,z,2,0,"span"),i(),d(20,H,2,1,"p",12),i()()()),f&2){let r,p,a,c;s(3),F("formGroup",t.loginForm),s(4),F("ngClass",E(7,M,!((r=t.loginForm.get("email"))!=null&&r.errors)&&(((r=t.loginForm.get("email"))==null?null:r.touched)||((r=t.loginForm.get("email"))==null?null:r.dirty)),((r=t.loginForm.get("email"))==null?null:r.errors)&&(((r=t.loginForm.get("email"))==null?null:r.touched)||((r=t.loginForm.get("email"))==null?null:r.dirty)))),s(),g(8,(p=t.loginForm.get("email"))!=null&&p.errors&&((p=t.loginForm.get("email"))!=null&&p.touched||(p=t.loginForm.get("email"))!=null&&p.dirty)?8:-1),s(4),F("ngClass",E(10,M,!((a=t.loginForm.get("password"))!=null&&a.errors)&&(((a=t.loginForm.get("password"))==null?null:a.touched)||((a=t.loginForm.get("password"))==null?null:a.dirty)),((a=t.loginForm.get("password"))==null?null:a.errors)&&(((a=t.loginForm.get("password"))==null?null:a.touched)||((a=t.loginForm.get("password"))==null?null:a.dirty)))),s(),g(13,(c=t.loginForm.get("password"))!=null&&c.errors&&((c=t.loginForm.get("password"))!=null&&c.touched||(c=t.loginForm.get("password"))!=null&&c.dirty)?13:-1),s(6),g(19,t.isLoading?19:-1),s(),g(20,t.msgError?20:-1)}},dependencies:[V,k,N,A,R,q,D,L,x]});let e=n;return e})();export{te as LoginComponent};
